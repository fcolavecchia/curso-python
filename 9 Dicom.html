

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Imágenes médicas - DICOM &#8212; Python para imágenes médicas</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '9 Dicom';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Imágenes médicas - DICOM 3D" href="A%20Dicom%203D.html" />
    <link rel="prev" title="Interpolación - Scipy" href="8%20Interpolaci%C3%B3n.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="00%20Intro.html">
  
  
  
  
  
    <p class="title logo__title">Python para imágenes médicas</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00%20Intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0%20Introducci%C3%B3n%20a%20Jupyter%20Notebooks.html">Clase 0</a></li>

<li class="toctree-l1"><a class="reference internal" href="1%20El%20lenguaje%20Python.html">Introducción a Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="2%20Funciones.html">Funciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="3%20M%C3%A1s%20sobre%20funciones.html">Más sobre Funciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="4%20M%C3%B3dulos.html">Módulos</a></li>
<li class="toctree-l1"><a class="reference internal" href="5%20Numpy%20-%20avanzado.html">NumPy - Avanzado</a></li>
<li class="toctree-l1"><a class="reference internal" href="5%20Numpy.html">NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="6%20Matplotlib.html">Líneas, símbolos y colores</a></li>







<li class="toctree-l1"><a class="reference internal" href="7%20Intermedio.html">Windows, <code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> y más</a></li>


<li class="toctree-l1"><a class="reference internal" href="8%20Interpolaci%C3%B3n.html">Interpolación - Scipy</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">Imágenes médicas - DICOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="A%20Dicom%203D.html">Imágenes médicas - DICOM 3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="B%20Integrales.html">Integración numérica</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ejercicios/Borges%20y%20matplotlib.html">Borges y  <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="Pangrama%20Versiones.html">Pangrama</a></li>




<li class="toctree-l1"><a class="reference internal" href="Generala.html">Examen Final</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F9 Dicom.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/9 Dicom.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Imágenes médicas - DICOM</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-standard-dicom">El standard DICOM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalando-pydicom">Instalando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usando-pydicom">Usando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abrir-un-archivo-dicom">Abrir un archivo DICOM</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#para-acceder-a-campos-privados-debo-hacerlo-por-el-tag"><em>Para acceder a CAMPOS PRIVADOS debo hacerlo por el TAG</em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#las-imagenes-dicom">Las imágenes DICOM</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ajustando-la-imagen">Ajustando la imagen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#obteniendo-hus">Obteniendo HUs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#window-and-level">Window and Level</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulando-la-imagen">Manipulando la imagen</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ventanas-de-visualizacion-tipicas-en-ct">Ventanas de visualización típicas en CT</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tex2jax_ignore mathjax_ignore section" id="imagenes-medicas-dicom">
<h1>Imágenes médicas - DICOM<a class="headerlink" href="#imagenes-medicas-dicom" title="Permalink to this headline">#</a></h1>
<div class="section" id="el-standard-dicom">
<h2>El standard DICOM<a class="headerlink" href="#el-standard-dicom" title="Permalink to this headline">#</a></h2>
<p>Para facilitar la intercomunicación entre distintas modalidades de diagnóstico por imágenes, se creó en 1993 el formato <strong>DICOM</strong> (<em>Digital Imaging and Communications in Medicine</em>).
Este es un standard que define cómo guardar la información de una imagen, series de imágenes e incluso videos (<em>cines</em>), junto con datos relevantes de la misma, datos del paciente, del centro médico, de la modalidad específica de diagnóstico, etc.</p>
<p>La definición del standard es extensísima (pueden consultarla en <a class="reference external" href="https://www.dicomstandard.org/current">https://www.dicomstandard.org/current</a>), dado que incluye un enorme abanico de posibles tipos de datos.</p>
<p>Esencialmente, un archivo DICOM está estructurado en una lista de <em>TAGS</em> que se componen de la siguiente manera:</p>
<ul>
<li><p>Dos números hexadecimales (denominados <strong>Grupo</strong> y <strong>Elemento</strong>) que identifican el atributo de la imagen. Cada atributo tiene un nombre asociado, que es el que se utiliza generalmente para acceder al mismo. Por ejemplo</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  (0008, 0060) Modality 
</pre></div>
</div>
</li>
</ul>
<p>corresponde al grupo 0008, elemento 0006 que describe el atributo Modalidad de la imagen.</p>
<ul class="simple">
<li><p>Dos letras (<strong>Value Representation</strong>) que indican el tipo de dato que se está guardando en el tag, por ejemplo</p>
<ul>
<li><p>‘SH’ para <em>short strings</em> (hasta 16 caracteres)</p></li>
<li><p>‘US’ para <em>enteros sin signo</em> (enteros mayores o iguales que cero, usando 2 bytes)</p></li>
<li><p>‘SQ’ para secuencias de otros tags</p></li>
<li><p><a class="reference external" href="http://dicom.nema.org/dicom/2013/output/chtml/part05/sect_6.2.html">y otros más</a></p></li>
</ul>
</li>
<li><p>El valor específico del atributo en sí.</p></li>
</ul>
<p>Entonces, un tag completo sería</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(0008, 0080) Institution Name                    LO: &#39;INTECNUS&#39;
</pre></div>
</div>
<blockquote>
<div><p>Recomendamos usar la página <a class="reference external" href="https://dicom.innolitics.com/ciods">https://dicom.innolitics.com/ciods</a> para explorar los tag DICOM, dado que la página del standard es compleja para buscar información</p>
</div></blockquote>
<p>Afortunadamente, la gran mayoría de los lenguajes provee de bibliotecas para trabajar con archivos DICOM. Python no es una excepción, y usa el módulo <code class="docutils literal notranslate"><span class="pre">pydicom</span></code>.</p>
</div>
<div class="section" id="instalando-pydicom">
<h2>Instalando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code><a class="headerlink" href="#instalando-pydicom" title="Permalink to this headline">#</a></h2>
<p>Desafortunadamente, <code class="docutils literal notranslate"><span class="pre">pydicom</span></code> no viene instalado por defecto en Anaconda. Veamos cómo instalarlo.</p>
<ol class="arabic">
<li><p>Correr la línea de comando de miniconda.</p></li>
<li><p>En la línea de comando,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> conda install -c conda-forge pydicom
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="usando-pydicom">
<h2>Usando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code><a class="headerlink" href="#usando-pydicom" title="Permalink to this headline">#</a></h2>
<p>Una vez instalado <code class="docutils literal notranslate"><span class="pre">pydicom</span></code>, es posible usarlo como un módulo cualquiera. La documentación está acá: <a class="reference external" href="https://pydicom.github.io/pydicom/stable/index.html">https://pydicom.github.io/pydicom/stable/index.html</a></p>
<blockquote>
<div><p>Es importante mencionar que, además de poder acceder a todos los tags DICOM de un archivo, <code class="docutils literal notranslate"><span class="pre">pydicom</span></code> además guarda información del archivo en sus propias variables, para facilitar el acceso a las mismas.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pydicom</span>

<span class="c1">#</span>
<span class="c1">#    pydicom provee algunos datos de ejemplo, que se pueden importar así:</span>
<span class="c1">#</span>
<span class="c1"># from pydicom.data import get_testdata_files</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="abrir-un-archivo-dicom">
<h3>Abrir un archivo DICOM<a class="headerlink" href="#abrir-un-archivo-dicom" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span> <span class="o">=</span> <span class="n">pydicom</span><span class="o">.</span><span class="n">dcmread</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;../Assets/CT/IM-0001-0200-0001.dcm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">DCM</span> <span class="o">=</span> <span class="n">pydicom</span><span class="o">.</span><span class="n">dcmread</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;../Assets/CT/IM-0001-0200-0001.dcm&#39;</span><span class="p">)</span>

<span class="nn">File /opt/miniconda3/lib/python3.9/site-packages/pydicom/filereader.py:993,</span> in <span class="ni">dcmread</span><span class="nt">(fp, defer_size, stop_before_pixels, force, specific_tags)</span>
<span class="g g-Whitespace">    </span><span class="mi">991</span>     <span class="n">caller_owns_file</span> <span class="o">=</span> <span class="kc">False</span>
<span class="g g-Whitespace">    </span><span class="mi">992</span>     <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Reading file &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fp</span><span class="p">))</span>
<span class="ne">--&gt; </span><span class="mi">993</span>     <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">994</span> <span class="k">elif</span> <span class="n">fp</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;seek&quot;</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">995</span>     <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;dcmread: Expected a file path or a file-like, &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">996</span>                     <span class="s2">&quot;but got &quot;</span> <span class="o">+</span> <span class="nb">type</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;../Assets/CT/IM-0001-0200-0001.dcm&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">DCM</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pydicom.dataset.FileDataset
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0008, 0005) Specific Character Set              CS: &#39;ISO_IR 100&#39;
(0008, 0008) Image Type                          CS: [&#39;ORIGINAL&#39;, &#39;PRIMARY&#39;, &#39;AXIAL&#39;]
(0008, 0012) Instance Creation Date              DA: &#39;20191106&#39;
(0008, 0013) Instance Creation Time              TM: &#39;164949&#39;
(0008, 0016) SOP Class UID                       UI: CT Image Storage
(0008, 0018) SOP Instance UID                    UI: 1.2.840.113619.2.290.3.1225403042.932.1573045470.721.200
(0008, 0020) Study Date                          DA: &#39;20191106&#39;
(0008, 0021) Series Date                         DA: &#39;20191106&#39;
(0008, 0022) Acquisition Date                    DA: &#39;20191106&#39;
(0008, 0023) Content Date                        DA: &#39;20191106&#39;
(0008, 0030) Study Time                          TM: &#39;164219&#39;
(0008, 0031) Series Time                         TM: &#39;164539&#39;
(0008, 0032) Acquisition Time                    TM: &#39;164650.808161&#39;
(0008, 0033) Content Time                        TM: &#39;164949&#39;
(0008, 0050) Accession Number                    SH: &#39;2473501&#39;
(0008, 0060) Modality                            CS: &#39;CT&#39;
(0008, 0070) Manufacturer                        LO: &#39;GE MEDICAL SYSTEMS&#39;
(0008, 0080) Institution Name                    LO: &#39;INTECNUS&#39;
(0008, 0090) Referring Physician&#39;s Name          PN: &#39;0&#39;
(0008, 1010) Station Name                        SH: &#39;petct&#39;
(0008, 1030) Study Description                   LO: &#39;PET CUERPO COMPLETO-&#39;
(0008, 103e) Series Description                  LO: &#39;Standard/Full&#39;
(0008, 1050) Performing Physician&#39;s Name         PN: &#39;&quot;&#39;
(0008, 1060) Name of Physician(s) Reading Study  PN: &#39;VENTIMIGLIA, ROMINA&#39;
(0008, 1070) Operators&#39; Name                     PN: &#39;CC&#39;
(0008, 1090) Manufacturer&#39;s Model Name           LO: &#39;Discovery 710&#39;
(0008, 1140)  Referenced Image Sequence   1 item(s) ---- 
   (0008, 1150) Referenced SOP Class UID            UI: CT Image Storage
   (0008, 1155) Referenced SOP Instance UID         UI: 1.2.840.113619.2.290.3.1225403042.932.1573045470.333.2
   ---------
(0009, 0010) Private Creator                     LO: &#39;GEMS_IDEN_01&#39;
(0009, 1001) [Full fidelity]                     LO: &#39;CT_LIGHTSPEED&#39;
(0009, 1002) [Suite id]                          SH: &#39;CT83&#39;
(0009, 1004) [Product id]                        SH: &#39;Discovery 710&#39;
(0009, 1027) [Image actual date]                 SL: 1573058739
(0009, 10e3) [Equipment UID]                     UI: &#39;&#39;
(0010, 0010) Patient&#39;s Name                      PN: &#39;PET CT INTECNUS&#39;
(0010, 0020) Patient ID                          LO: &#39;16682827&#39;
(0010, 0030) Patient&#39;s Birth Date                DA: &#39;19641026&#39;
(0010, 0040) Patient&#39;s Sex                       CS: &#39;F&#39;
(0010, 1000) Other Patient IDs                   LO: &#39;&#39;
(0010, 1010) Patient&#39;s Age                       AS: &#39;055Y&#39;
(0010, 1020) Patient&#39;s Size                      DS: &quot;1.62&quot;
(0010, 1030) Patient&#39;s Weight                    DS: &quot;65.0&quot;
(0010, 21b0) Additional Patient History          LT: &#39;&#39;
(0018, 0022) Scan Options                        CS: &#39;HELICAL MODE&#39;
(0018, 0050) Slice Thickness                     DS: &quot;2.500000&quot;
(0018, 0060) KVP                                 DS: &quot;120&quot;
(0018, 0088) Spacing Between Slices              DS: &quot;3.270000&quot;
(0018, 0090) Data Collection Diameter            DS: &quot;500.000000&quot;
(0018, 1020) Software Version(s)                 LO: &#39;pet_coreload.87&#39;
(0018, 1030) Protocol Name                       LO: &#39;10.1 PET/CT FDG + TORAX&#39;
(0018, 1100) Reconstruction Diameter             DS: &quot;700.000000&quot;
(0018, 1110) Distance Source to Detector         DS: &quot;949.147000&quot;
(0018, 1111) Distance Source to Patient          DS: &quot;541.000000&quot;
(0018, 1120) Gantry/Detector Tilt                DS: &quot;0.000000&quot;
(0018, 1130) Table Height                        DS: &quot;181.500000&quot;
(0018, 1140) Rotation Direction                  CS: &#39;CW&#39;
(0018, 1150) Exposure Time                       IS: &quot;500&quot;
(0018, 1151) X-Ray Tube Current                  IS: &quot;255&quot;
(0018, 1152) Exposure                            IS: &quot;5&quot;
(0018, 1160) Filter Type                         SH: &#39;BODY FILTER&#39;
(0018, 1170) Generator Power                     IS: &quot;61800&quot;
(0018, 1190) Focal Spot(s)                       DS: &quot;1.200000&quot;
(0018, 1210) Convolution Kernel                  SH: &#39;STANDARD&#39;
(0018, 5100) Patient Position                    CS: &#39;FFS&#39;
(0018, 9305) Revolution Time                     FD: 0.5
(0018, 9306) Single Collimation Width            FD: 0.625
(0018, 9307) Total Collimation Width             FD: 40.0
(0018, 9309) Table Speed                         FD: 110.0
(0018, 9310) Table Feed per Rotation             FD: 55.0
(0018, 9311) Spiral Pitch Factor                 FD: 1.375
(0019, 0010) Private Creator                     LO: &#39;GEMS_ACQU_01&#39;
(0019, 1002) [Detector Channel]                  SL: 912
(0019, 1003) [Cell number at Theta]              DS: &quot;389.750000&quot;
(0019, 1004) [Cell spacing]                      DS: &quot;1.023900&quot;
(0019, 100f) [Horiz. Frame of ref.]              DS: &quot;1995.000000&quot;
(0019, 1011) [Series contrast]                   SS: 0
(0019, 1018) [First scan ras]                    LO: &#39;I&#39;
(0019, 101a) [Last scan ras]                     LO: &#39;I&#39;
(0019, 1023) [Table Speed [mm/rotation]]         DS: &quot;55.000000&quot;
(0019, 1024) [Mid Scan Time [sec]]               DS: &quot;154.764603&quot;
(0019, 1025) [Mid scan flag]                     SS: 1
(0019, 1026) [Tube Azimuth [degree]]             SL: -1
(0019, 1027) [Rotation Speed [msec]]             DS: &quot;0.500000&quot;
(0019, 102c) [Number of triggers]                SL: 19295
(0019, 102e) [Angle of first view]               DS: &quot;0.000000&quot;
(0019, 102f) [Trigger frequency]                 DS: &quot;1968.000000&quot;
(0019, 1039) [SFOV Type]                         SS: 1024
(0019, 1042) [Segment Number]                    SS: 0
(0019, 1043) [Total Segments Required]           SS: 0
(0019, 1047) [View compression factor]           SS: 1
(0019, 1052) [Recon post proc. Flag]             SS: 1
(0019, 106a) [Dependent on #views processed]     SS: 3
(0020, 000d) Study Instance UID                  UI: 1.2.840.113619.2.290.3.1225403042.932.1573045470.329
(0020, 000e) Series Instance UID                 UI: 1.2.840.113619.2.290.3.1225403042.932.1573045470.409.5
(0020, 0010) Study ID                            SH: &#39;1114&#39;
(0020, 0011) Series Number                       IS: &quot;5&quot;
(0020, 0012) Acquisition Number                  IS: &quot;1&quot;
(0020, 0013) Instance Number                     IS: &quot;200&quot;
(0020, 0032) Image Position (Patient)            DS: [&#39;-350.000&#39;, &#39;-350.000&#39;, &#39;-552.750&#39;]
(0020, 0037) Image Orientation (Patient)         DS: [&#39;1.000000&#39;, &#39;0.000000&#39;, &#39;0.000000&#39;, &#39;0.000000&#39;, &#39;1.000000&#39;, &#39;0.000000&#39;]
(0020, 0052) Frame of Reference UID              UI: 1.2.840.113619.2.290.3.1225403042.932.1573045470.330.19950.5
(0020, 1040) Position Reference Indicator        LO: &#39;OM&#39;
(0020, 1041) Slice Location                      DS: &quot;-552.750&quot;
(0021, 0010) Private Creator                     LO: &#39;GEMS_RELA_01&#39;
(0021, 1003) [Series from which Prescribed]      SS: 4
(0021, 1035) [Series from which prescribed]      SS: 1
(0021, 1036) [Image from which prescribed]       SS: 2
(0021, 1091) [Biopsy position]                   SS: 0
(0021, 1092) [Biopsy T location]                 FL: 0.0
(0021, 1093) [Biopsy ref location]               FL: 0.0
(0023, 0010) Private Creator                     LO: &#39;GEMS_STDY_01&#39;
(0023, 1070) [Start time(secs) in first axial]   FD: 1573058660.856057
(0027, 0010) Private Creator                     LO: &#39;GEMS_IMAG_01&#39;
(0027, 1010) [Scout Type]                        SS: 0
(0027, 101c) [Vma mamp]                          SL: 0
(0027, 101e) [Vma mod]                           SL: 0
(0027, 101f) [Vma clip]                          SL: 190
(0027, 1020) [Smart scan ON/OFF flag]            SS: 2
(0027, 1035) [Plane Type]                        SS: 2
(0027, 1042) [Center R coord of plane image]     FL: 0.0
(0027, 1043) [Center A coord of plane image]     FL: 0.0
(0027, 1044) [Center S coord of plane image]     FL: -552.75
(0027, 1045) [Normal R coord]                    FL: 0.0
(0027, 1046) [Normal A coord]                    FL: 0.0
(0027, 1047) [Normal S coord]                    FL: -1.0
(0027, 1050) [Scan Start Location]               FL: 0.0
(0027, 1051) [Scan End Location]                 FL: 0.0
(0028, 0002) Samples per Pixel                   US: 1
(0028, 0004) Photometric Interpretation          CS: &#39;MONOCHROME2&#39;
(0028, 0010) Rows                                US: 512
(0028, 0011) Columns                             US: 512
(0028, 0030) Pixel Spacing                       DS: [&#39;1.367188&#39;, &#39;1.367188&#39;]
(0028, 0100) Bits Allocated                      US: 16
(0028, 0101) Bits Stored                         US: 16
(0028, 0102) High Bit                            US: 15
(0028, 0103) Pixel Representation                US: 1
(0028, 0120) Pixel Padding Value                 SS: -2000
(0028, 1050) Window Center                       DS: &quot;40&quot;
(0028, 1051) Window Width                        DS: &quot;400&quot;
(0028, 1052) Rescale Intercept                   DS: &quot;-1024&quot;
(0028, 1053) Rescale Slope                       DS: &quot;1&quot;
(0028, 1054) Rescale Type                        LO: &#39;HU&#39;
(0040, 0244) Performed Procedure Step Start Date DA: &#39;20191106&#39;
(0040, 0245) Performed Procedure Step Start Time TM: &#39;164219&#39;
(0040, 0253) Performed Procedure Step ID         SH: &#39;PPS ID   1114&#39;
(0040, 0254) Performed Procedure Step Descriptio LO: &#39;PET CUERPO COMPLETO-&#39;
(0043, 0010) Private Creator                     LO: &#39;GEMS_PARM_01&#39;
(0043, 1010) [Window value]                      US: 400
(0043, 1012) [X-ray chain]                       SS: [99, 99, 99]
(0043, 1016) [Number of overranges]              SS: 0
(0043, 101e) [Delta Start Time [msec]]           DS: &quot;4.562500&quot;
(0043, 101f) [Max overranges in a view]          SL: 0
(0043, 1021) [Corrected after glow terms]        SS: 0
(0043, 1025) [Reference channels]                SS: [0, 0, 0, 0, 0, 0]
(0043, 1026) [No views ref chans blocked]        US: [0, 0, 0, 0]
(0043, 1027) [Scan Pitch Ratio]                  SH: &#39;1.375:1&#39;
(0043, 1028) [Unique image iden]                 OB: b&#39;00&#39;
(0043, 102b) [Private Scan Options]              SS: [2, 0, 0, 0]
(0043, 1031) [Recon Center Coordinates]          DS: [&#39;0.000000&#39;, &#39;0.000000&#39;]
(0043, 1040) [Trigger on position]               FL: 11.807700157165527
(0043, 1041) [Degree of rotation]                FL: 7058.60302734375
(0043, 1042) [DAS trigger source]                SL: 0
(0043, 1043) [DAS fpa gain]                      SL: 0
(0043, 1044) [DAS output source]                 SL: 0
(0043, 1045) [DAS ad input]                      SL: 0
(0043, 1046) [DAS cal mode]                      SL: 0
(0043, 104d) [Start scan to X-ray on delay]      FL: 0.0
(0043, 104e) [Duration of X-ray on]              FL: 9.804369926452637
(0043, 1064) [Image Filter]                      CS: &#39;&#39;
(0045, 0010) Private Creator                     LO: &#39;GEMS_HELIOS_01&#39;
(0045, 1001) [Number of Macro Rows in Detector]  SS: 64
(0045, 1002) [Macro width at ISO Center]         FL: 0.625
(0045, 1003) [DAS type]                          SS: 24
(0045, 1004) [DAS gain]                          SS: 4
(0045, 1006) [Table Direction]                   CS: &#39;OUT OF GANTRY&#39;
(0045, 1007) [Z smoothing Factor]                FL: 0.0
(0045, 1008) [View Weighting Mode]               SS: 0
(0045, 1009) [Sigma Row number]                  SS: 0
(0045, 100a) [Minimum DAS value]                 FL: 0.0
(0045, 100b) [Maximum Offset Value]              FL: 0.0
(0045, 100c) [Number of Views shifted]           SS: 0
(0045, 100d) [Z tracking Flag]                   SS: 0
(0045, 100e) [Mean Z error]                      FL: 0.0
(0045, 100f) [Z tracking Error]                  FL: 0.0
(0045, 1010) [Start View 2A]                     SS: 0
(0045, 1011) [Number of Views 2A]                SS: 0
(0045, 1012) [Start View 1A]                     SS: 0
(0045, 1013) [Sigma Mode]                        SS: 0
(0045, 1014) [Number of Views 1A]                SS: 0
(0045, 1015) [Start View 2B]                     SS: 0
(0045, 1016) [Number Views 2B]                   SS: 0
(0045, 1017) [Start View 1B]                     SS: 0
(0045, 1018) [Number of Views 1B]                SS: 0
(0045, 1021) [Iterbone Flag]                     SS: 0
(0045, 1022) [Perisstaltic Flag]                 SS: 0
(0045, 1032) [TemporalResolution]                FL: 0.5
(0045, 103b) [NoiseReductionImageFilterDesc]     LO: &#39;&#39;
(0053, 0010) Private Creator                     LO: &#39;GEHC_CT_ADVAPP_001&#39;
(0053, 1020) [ShuttleFlag]                       IS: &quot;0&quot;
(0053, 1040) [IterativeReconAnnotation]          SH: &#39;SS50&#39;
(0053, 1041) [IterativeReconMode]                SH: &#39;Slice&#39;
(0053, 1042) [IterativeReconConfiguration]       LO: &#39;SS50:Slice&#39;
(0053, 1043) [IterativeReconLevel]               SH: &#39;50&#39;
(0053, 1060) [reconFlipRotateAnno]               SH: &#39;&#39;
(0053, 1061) [highResolutionFlag]                SH: &#39;0&#39;
(0053, 1062) [RespiratoryFlag]                   SH: &#39;0&#39;
(0053, 1064) Private tag data                    IS: &quot;1&quot;
(0053, 1065) Private tag data                    IS: &quot;0&quot;
(0053, 1066) Private tag data                    LO: &#39;120kV&#39;
(0053, 1067) Private tag data                    IS: &quot;0&quot;
(0053, 1068) Private tag data                    IS: &quot;0&quot;
(0053, 106a) Private tag data                    IS: &quot;0&quot;
(0053, 106b) Private tag data                    IS: &quot;0&quot;
(0053, 109d) Private tag data                    LO: &#39;&#39;
(7fe0, 0010) Pixel Data                          OW: Array of 524288 elements
</pre></div>
</div>
</div>
</div>
<p>Para acceder a cada uno de los atributos del archivo DICOM se utiliza el nombre del atributo</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span><span class="o">.</span><span class="n">PatientName</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;PET CT INTECNUS&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span><span class="o">.</span><span class="n">StudyDescription</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;PET CUERPO COMPLETO-&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span><span class="o">.</span><span class="n">ProtocolName</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;10.1 PET/CT FDG + TORAX&#39;
</pre></div>
</div>
</div>
</div>
<p>Pero también tengo la información desde el tag, usando el grupo y elemento en representación hexadecimal:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tag  : &quot;</span><span class="p">,</span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x0018</span><span class="p">,</span><span class="mh">0x1030</span><span class="p">]</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;VR   : &quot;</span><span class="p">,</span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x0018</span><span class="p">,</span><span class="mh">0x1030</span><span class="p">]</span><span class="o">.</span><span class="n">VR</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;valor: &quot;</span><span class="p">,</span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x0018</span><span class="p">,</span><span class="mh">0x1030</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tag  :  (0018, 1030)
VR   :  LO
valor:  10.1 PET/CT FDG + TORAX
</pre></div>
</div>
</div>
</div>
<div class="section" id="para-acceder-a-campos-privados-debo-hacerlo-por-el-tag">
<h4><em>Para acceder a CAMPOS PRIVADOS debo hacerlo por el TAG</em><a class="headerlink" href="#para-acceder-a-campos-privados-debo-hacerlo-por-el-tag" title="Permalink to this headline">#</a></h4>
<p>Un campo privado se encuentran definidos por el fabricante y no estan en el diccionario del estándar. Sin embargo, se encuentran perfectamente detallados en los respectivos <strong>dicom conformance statement</strong> de cada equipo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x0009</span><span class="p">,</span> <span class="mh">0x1004</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0009, 1004) [Product id]                        SH: &#39;Discovery 710&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x0009</span><span class="p">,</span> <span class="mh">0x1004</span><span class="p">]</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
      <span class="n">DCM</span><span class="p">[</span><span class="mh">0x0009</span><span class="p">,</span> <span class="mh">0x1004</span><span class="p">]</span><span class="o">.</span><span class="n">VR</span><span class="p">,</span>
      <span class="n">DCM</span><span class="p">[</span><span class="mh">0x0009</span><span class="p">,</span> <span class="mh">0x1004</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0009, 1004)
SH
Discovery 710
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="las-imagenes-dicom">
<h3>Las imágenes DICOM<a class="headerlink" href="#las-imagenes-dicom" title="Permalink to this headline">#</a></h3>
<p>Las imágenes propiamente dichas se encuentran guardadas como un array en el atributo <strong>PIXEL DATA</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="p">[</span><span class="mh">0x7fe0</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">PixelData</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">PixelData</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">11</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(7fe0, 0010) Pixel Data                          OW: Array of 524288 elements
&lt;class &#39;bytes&#39;&gt;
b&#39;0\xf80\xf80\xf80\xf80\xf80&#39;
</pre></div>
</div>
</div>
</div>
<p>Sin embargo, este atributo tiene como <em>Value Representation</em> a ‘OW’, (<em>Other Word String</em>) que no parece ser muy amigable…</p>
<p>Por eso, <code class="docutils literal notranslate"><span class="pre">pydicom</span></code> guarda la imagen en la variable <code class="docutils literal notranslate"><span class="pre">pixel_array</span></code>, que es un array de <code class="docutils literal notranslate"><span class="pre">numpy</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">pixel_array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tamaño de la imagen:&quot;</span><span class="p">,</span><span class="n">DCM</span><span class="o">.</span><span class="n">pixel_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.ndarray&#39;&gt;
Tamaño de la imagen: (512, 512)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig_1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">img1</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">pixel_array</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;CORTE AXIAL CT, sin procesar&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/df9bbe09d68f4ad48edd4b12dcf369207ad2fe741856b3e7a9130518574c52da.png" src="_images/df9bbe09d68f4ad48edd4b12dcf369207ad2fe741856b3e7a9130518574c52da.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">pixel_array</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[-2000 -2000 -2000 ... -2000 -2000 -2000]
 [-2000 -2000 -2000 ... -2000 -2000 -2000]
 [-2000 -2000 -2000 ... -2000 -2000 -2000]
 ...
 [-2000 -2000 -2000 ... -2000 -2000 -2000]
 [-2000 -2000 -2000 ... -2000 -2000 -2000]
 [-2000 -2000 -2000 ... -2000 -2000 -2000]]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="ajustando-la-imagen">
<h2>Ajustando la imagen<a class="headerlink" href="#ajustando-la-imagen" title="Permalink to this headline">#</a></h2>
<div class="section" id="obteniendo-hus">
<h3>Obteniendo HUs<a class="headerlink" href="#obteniendo-hus" title="Permalink to this headline">#</a></h3>
<p>Cada pixel de una imagen de CT corresponde a un determinado valor de unidades de Hounsfield. Sin embargo, los valores que se guardan en los archivos no corresponden directamente a los valores de HU, sino a una versión rescaleada (esto se debe básicamente a las limitaciones que impone el formato DICOM al tipo de dato a usar). Por eso, para obtener HU, es necesario aplicar la siguiente transformación lineal:</p>
<div class="math notranslate nohighlight">
\[
f_t(x,y) = \texttt{DCM.RescaleSlope} \times f_{orig}(x,y)  + \texttt{DCM.RescaleIntercept}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">RescaleType</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">RescaleSlope</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">RescaleIntercept</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HU
1
-1024
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imagen</span> <span class="o">=</span> <span class="n">DCM</span><span class="o">.</span><span class="n">pixel_array</span> <span class="o">*</span> <span class="n">DCM</span><span class="o">.</span><span class="n">RescaleSlope</span> <span class="o">+</span> <span class="n">DCM</span><span class="o">.</span><span class="n">RescaleIntercept</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imagen</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[-3024. -3024. -3024. ... -3024. -3024. -3024.]
 [-3024. -3024. -3024. ... -3024. -3024. -3024.]
 [-3024. -3024. -3024. ... -3024. -3024. -3024.]
 ...
 [-3024. -3024. -3024. ... -3024. -3024. -3024.]
 [-3024. -3024. -3024. ... -3024. -3024. -3024.]
 [-3024. -3024. -3024. ... -3024. -3024. -3024.]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">imagen</span><span class="p">[</span><span class="mi">50</span><span class="p">,</span><span class="mi">256</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">imagen</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">imagen</span><span class="p">))</span>
<span class="n">imagen2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">imagen</span><span class="p">,</span> <span class="o">-</span><span class="mi">1000</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">imagen</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imagen2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-1000.0
-3024.0
1251.0
[[-1000. -1000. -1000. ... -1000. -1000. -1000.]
 [-1000. -1000. -1000. ... -1000. -1000. -1000.]
 [-1000. -1000. -1000. ... -1000. -1000. -1000.]
 ...
 [-1000. -1000. -1000. ... -1000. -1000. -1000.]
 [-1000. -1000. -1000. ... -1000. -1000. -1000.]
 [-1000. -1000. -1000. ... -1000. -1000. -1000.]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig_1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">img1</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imagen2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;CORTE AXIAL CT, HUs&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ae18b9ba733887d8641a788a63fdcb2d012e7446ae5780567072754bbf645138.png" src="_images/ae18b9ba733887d8641a788a63fdcb2d012e7446ae5780567072754bbf645138.png" />
</div>
</div>
</div>
<div class="section" id="window-and-level">
<h3>Window and Level<a class="headerlink" href="#window-and-level" title="Permalink to this headline">#</a></h3>
<p>El proceso de <em>Windowing</em> ( o <em>grey-level mapping, contrast stretching, histogram modification, contrast enhancement, LUT</em>, etc.) consiste en manipular las componentes de la imagen de forma tal que se puedan realzar ciertas estructuras particulares. El brillo de la imagen se ajusta a partir del <em>Window Level</em>, mientras que el contraste se ajusta a partir del <em>Window Width</em>.</p>
<p><img alt="Window%20and%20level.png" src="attachment:Window%20and%20level.png" /></p>
<p>Cada DICOM puede proveer un ancho y centro de ventana que viene desde el equipo de adquisición de imágenes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">WindowCenter</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DCM</span><span class="o">.</span><span class="n">WindowWidth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>40
400
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p>Recordemos que el valor de los pixeles en el monitor van de 0 a 255</p>
</div></blockquote>
<p>Típicamente si definimos</p>
<p>\begin{align}
c &amp;= \texttt{DCM.WindowCenter} \
w &amp;= \texttt{DCM.WindowWidth}
\end{align}</p>
<p>Entonces, la imagen transformada se obtiene como:</p>
<p>\begin{align}
f_t(x,y) &amp;= 0 &amp;\textrm{si} \qquad f(x,y) &lt; c - w /2 \
f_t(x,y) &amp;= 255  &amp;\textrm{si} \qquad f(x,y) &gt; c + w /2 \
f_t(x,y) &amp;= (f(x,y) - c)  \times 255/w   &amp;\textrm{en otro caso}
\end{align}</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;El centro de ventana es: &#39;</span><span class="p">,</span> <span class="n">DCM</span><span class="o">.</span><span class="n">WindowCenter</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">El ancho de ventana es: &#39;</span><span class="p">,</span> <span class="n">DCM</span><span class="o">.</span><span class="n">WindowWidth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>El centro de ventana es:  40 
El ancho de ventana es:  400
</pre></div>
</div>
</div>
</div>
<p>Veamos si podemos hacer esto sin tener que generar otra imagen transformada. Para eso, veamos los parámetros opcionales de <code class="docutils literal notranslate"><span class="pre">plt.imshow</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>plt.imshow<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
<p>Es decir que si pasamos el máximo y el mínimo de la ventana, ya obtendríamos el resultado esperado:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">w</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">ventmax</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">w</span><span class="o">/</span><span class="mi">2</span>
<span class="n">ventmin</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="n">w</span><span class="o">/</span><span class="mi">2</span>

<span class="n">fig_1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">])</span>
<span class="n">img1</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imagen</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">ventmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">ventmax</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;CORTE AXIAL CT&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7f1268be8c5bc87117aa4abacf733a5a132d361ffc0eb3e1a7dee5a9b0a0ded0.png" src="_images/7f1268be8c5bc87117aa4abacf733a5a132d361ffc0eb3e1a7dee5a9b0a0ded0.png" />
</div>
</div>
</div>
<div class="section" id="manipulando-la-imagen">
<h3>Manipulando la imagen<a class="headerlink" href="#manipulando-la-imagen" title="Permalink to this headline">#</a></h3>
<p>Finalmente, podemos manipular la imagen a voluntad, dado que es un array de <code class="docutils literal notranslate"><span class="pre">numpy</span></code>. Por ejemplo, podemos reemplazar los puntos de la matriz por otros valores</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imagen2</span> <span class="o">=</span> <span class="n">imagen</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">imagen2</span><span class="p">[</span><span class="mi">150</span><span class="p">:</span><span class="mi">160</span><span class="p">,:]</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">imagen2</span><span class="p">[</span><span class="mi">370</span><span class="p">:</span><span class="mi">380</span><span class="p">,:]</span> <span class="o">=</span> <span class="mi">1000</span>


<span class="n">fig_1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">])</span>
<span class="n">img1</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imagen2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">ventmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">ventmax</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;CORTE AXIAL CT&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/845063c77c171cd5552cf69b938068051dfef099f44ac599ce1c12f741028620.png" src="_images/845063c77c171cd5552cf69b938068051dfef099f44ac599ce1c12f741028620.png" />
</div>
</div>
<p>O reemplazar ciertos puntos de acuerdo a una condición particular:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imagen2</span> <span class="o">=</span> <span class="n">imagen</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">imagen2</span><span class="p">[</span><span class="n">imagen2</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">800</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig_1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">])</span>
<span class="n">img1</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imagen2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">ventmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">ventmax</span><span class="p">)</span>
<span class="n">img1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;CORTE AXIAL CT&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1c7839e533f0a2b225c962e060c66c1d7347949ddef577756279ff35b48318f8.png" src="_images/1c7839e533f0a2b225c962e060c66c1d7347949ddef577756279ff35b48318f8.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imagen2</span> <span class="o">=</span> <span class="n">imagen</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">imagen2</span><span class="p">[(</span><span class="n">imagen2</span><span class="o">&lt;-</span><span class="mi">800</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">imagen2</span><span class="o">&gt;-</span><span class="mi">1100</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="n">fig5</span><span class="p">,</span> <span class="n">g</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">g</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imagen2</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">ventmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">ventmax</span><span class="p">)</span>
<span class="n">g</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;IMAGEN 2&#39;</span><span class="p">)</span>

<span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;HISTOGRAMA de IMAGEN 2&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">imagen2</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span> <span class="c1">#ravel devuelve un vector 1D con todos los elementosde la matrix.</span>
<span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;HOUNSFIELD UNITS&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">()</span>
<span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4000</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;El FOV del CT del PET es de: &#39;</span><span class="p">,</span> <span class="n">imagen2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">DCM</span><span class="o">.</span><span class="n">PixelSpacing</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;mm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3ffd1a043e90c2aa2fce5cf0d2b7f0b84266cdc778936329dfc430f3012f6ed6.png" src="_images/3ffd1a043e90c2aa2fce5cf0d2b7f0b84266cdc778936329dfc430f3012f6ed6.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>El FOV del CT del PET es de:  700.000256 mm
</pre></div>
</div>
</div>
</div>
<div class="section" id="ventanas-de-visualizacion-tipicas-en-ct">
<h4>Ventanas de visualización típicas en CT<a class="headerlink" href="#ventanas-de-visualizacion-tipicas-en-ct" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>Cabeza y cuello</p>
<ul>
<li><p>cerebro w:80 c:40</p></li>
<li><p>subdural w:130-300 c:50-100</p></li>
<li><p>acv w:8 c:32 / w:40 c:40</p></li>
<li><p>hueso w:2800 c:600</p></li>
<li><p>Tejido blando: w:350–400 c:20–60</p></li>
</ul>
</li>
<li><p>Pecho</p>
<ul>
<li><p>Pulmones w:1500 c:-600</p></li>
<li><p>Mediastino w:350 c:50</p></li>
</ul>
</li>
<li><p>Abdomen</p>
<ul>
<li><p>Tejido blando w:400 c:50</p></li>
<li><p>Hígado w:150 c:30</p></li>
</ul>
</li>
<li><p>Columna</p>
<ul>
<li><p>Tejido blando w:250 c:50</p></li>
<li><p>Hueso w:1800 c:400</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="8%20Interpolaci%C3%B3n.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Interpolación - Scipy</p>
      </div>
    </a>
    <a class="right-next"
       href="A%20Dicom%203D.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Imágenes médicas - DICOM 3D</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-standard-dicom">El standard DICOM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalando-pydicom">Instalando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usando-pydicom">Usando <code class="docutils literal notranslate"><span class="pre">pydicom</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abrir-un-archivo-dicom">Abrir un archivo DICOM</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#para-acceder-a-campos-privados-debo-hacerlo-por-el-tag"><em>Para acceder a CAMPOS PRIVADOS debo hacerlo por el TAG</em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#las-imagenes-dicom">Las imágenes DICOM</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ajustando-la-imagen">Ajustando la imagen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#obteniendo-hus">Obteniendo HUs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#window-and-level">Window and Level</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulando-la-imagen">Manipulando la imagen</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ventanas-de-visualizacion-tipicas-en-ct">Ventanas de visualización típicas en CT</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>